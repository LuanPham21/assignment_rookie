@page "{ProductId}"
@model Rookie.CustomerSite.Pages.DetailModel
@{
}
<!-- Start Shop Detail  -->
<div class="shop-detail-box-main">
    <div class="container">
        <div class="row">
            <div class="col-xl-5 col-lg-5 col-md-6">
                <div id="carousel-example-1" class="single-product-slider carousel slide" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active"> <img class="d-block w-100" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="First slide"> </div>
                        <div class="carousel-item"> <img class="d-block w-100" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="Second slide"> </div>
                        <div class="carousel-item"> <img class="d-block w-100" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="Third slide"> </div>
                    </div>
                    <a class="carousel-control-prev" href="#carousel-example-1" role="button" data-slide="prev">
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carousel-example-1" role="button" data-slide="next">
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                        <span class="sr-only">Next</span>
                    </a>
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-example-1" data-slide-to="0" class="active">
                            <img class="d-block w-100 img-fluid" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="" />
                        </li>
                        <li data-target="#carousel-example-1" data-slide-to="1">
                            <img class="d-block w-100 img-fluid" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="" />
                        </li>
                        <li data-target="#carousel-example-1" data-slide-to="2">
                            <img class="d-block w-100 img-fluid" src="@Html.DisplayFor(model => model.Product.ThumbnailImage)" alt="" />
                        </li>
                    </ol>
                </div>
            </div>
            <div class="col-xl-7 col-lg-7 col-md-6">
                <div class="single-product-details">
                    <h2>@Html.DisplayFor(model => model.Product.Name)</h2>
                    <h5>$@Html.DisplayFor(model => model.Product.Price)</h5>
                    <p class="available-stock">
                        <span>@Html.DisplayFor(model => model.Product.Quantity)/</span>
                        @if (Model.Rating.Count() != 0)
                        {
                            for (var i = 1; i <= Math.Ceiling(Model.Rating.Select(m => m.Rating).Average()); i++)
                            {
                                <i class="fas fa-star"></i>
                            }
                            for (var i = (Math.Ceiling(Model.Rating.Select(m => m.Rating).Average()) + 1); i <= 5; i++)
                            {
                                <i class="far fa-star"></i>
                            }
                        }
                        else
                        {
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                        }
                        @if (Model.Rating.Count() == 0)
                        {
                            <small class="pt-1">Not Rating Yet</small>
                        }
                        else
                        {

                            <small class="pt-1">(@Model.Rating.Count() Reviews)</small>
                        }
                    <p><h4>@Html.DisplayFor(model => model.Product.Description)</h4>
                    <p>@Html.DisplayFor(model => model.Product.Details)</p>
                    <ul>
                        <li>
                            <div class="form-group size-st">
                                <label class="size-label">Size</label>
                                <select id="basic" class="selectpicker show-tick form-control">
                                    <option value="0">Size</option>
                                    <option value="0">S</option>
                                    <option value="1">M</option>
                                    <option value="1">L</option>
                                    <option value="1">XL</option>
                                    <option value="1">XXL</option>
                                    <option value="1">3XL</option>
                                    <option value="1">4XL</option>
                                </select>
                            </div>
                        </li>
                        <li>
                            <div class="form-group quantity-box">
                                <label class="control-label">Quantity</label>
                                <input class="form-control" value="0" min="0" max="20" type="number">
                            </div>
                        </li>
                    </ul>

                    <div class="price-box-bar">
                        <div class="cart-and-bay-btn">
                            <a class="btn hvr-hover" data-fancybox-close="" href="#">Buy New</a>
                            <a class="btn hvr-hover" data-fancybox-close="" href="#">Add to cart</a>
                        </div>
                    </div>

                    <div class="add-to-btn">
                        <div class="add-comp">
                            <a class="btn hvr-hover" href="#"><i class="fas fa-heart"></i> Add to wishlist</a>
                            <a class="btn hvr-hover" href="#"><i class="fas fa-sync-alt"></i> Add to Compare</a>
                        </div>
                        <div class="share-bar">
                            <a class="btn hvr-hover" href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                            <a class="btn hvr-hover" href="#"><i class="fab fa-google-plus" aria-hidden="true"></i></a>
                            <a class="btn hvr-hover" href="#"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                            <a class="btn hvr-hover" href="#"><i class="fab fa-pinterest-p" aria-hidden="true"></i></a>
                            <a class="btn hvr-hover" href="#"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <form method="post" asp-controller="Rating" asp-action="Index">
            <div class="d-flex my-3">
                <p class="mb-0 mr-2">Your Rating * :</p>
                <div class="text-primary">
                    <a type="radio" onclick="CRate(1)" class="ratingStar fas fa-star" value="1"></a>
                    <a type="radio" onclick="CRate(2)" class="ratingStar fas fa-star" value="2"></a>
                    <a type="radio" onclick="CRate(3)" class="ratingStar fas fa-star" value="3"></a>
                    <a type="radio" onclick="CRate(4)" class="ratingStar fas fa-star" value="4"></a>
                    <a type="radio" onclick="CRate(5)" class="ratingStar fas fa-star" value="5"></a>
                </div>
            </div>
            <div class="form-group">
                <label for="message">Your Review *</label>
                <textarea id="message" name="comment" cols="30" rows="5" class="form-control"></textarea>
            </div>
            <div class="form-group mb-0">
                <input id="Rating" name="rating" value="5" hidden />
                <input name="productId" value="@Model.ProductId" hidden />
                <input type="submit" value="Leave Your Review" class="btn btn-primary px-3">
            </div>
        </form>
        <div class="row mt-3">
            <div class="col-md-6 pre-scrollable" style="max-height:500px; overflow:auto">
                <h4 class="mb-4">@Model.Rating.Count() Reviews for "@Model.Product.Name"</h4>
                @foreach (var rate in Model.Rating)
                {
                    <div class="media mb-4">
                        <div class="media-body">
                            <div class="text-primary mb-2">
                                @for (var i = 1; i <= rate.Rating; i++)
                                {
                                    <i class="fas fa-star"></i>
                                }
                                @for (var i = (rate.Rating + 1); i <= 5; i++)
                                {
                                    <i class="far fa-star"></i>
                                }
                            </div>
                            <p>@rate.Description</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <!-- End Cart -->
    @section scripts{
    <script>
        $(".ratingStar").hover(function () {
            $(".ratingStar").addClass("far").removeClass("fas");

            $(this).addClass("fas").removeClass("far");
            $(this).prevAll(".ratingStar").addClass("fas").removeClass("far");
        });
        function CRate(r) {
            $("#Rating").val(r);

        }
    </script>
    }
